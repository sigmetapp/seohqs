#!/bin/bash
echo "üöÄ –î–µ–ø–ª–æ–π Google Indexing Service –Ω–∞ Vercel"
echo ""
echo "–ü—Ä–æ–≤–µ—Ä–∫–∞ Vercel CLI..."
if ! command -v vercel &> /dev/null; then
    echo "‚ùå Vercel CLI –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é..."
    npm install -g vercel
fi

echo "‚úÖ Vercel CLI –≥–æ—Ç–æ–≤"
echo ""
echo "–ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏..."
if ! vercel whoami &> /dev/null; then
    echo "‚ö†Ô∏è  –¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è. –ó–∞–ø—É—Å—Ç–∏—Ç–µ: vercel login"
    echo "–ó–∞—Ç–µ–º –∑–∞–ø—É—Å—Ç–∏—Ç–µ —ç—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç —Å–Ω–æ–≤–∞."
    exit 1
fi

echo "‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω"
echo ""
echo "üì¶ –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞..."
npm run build

if [ $? -ne 0 ]; then
    echo "‚ùå –û—à–∏–±–∫–∞ —Å–±–æ—Ä–∫–∏"
    exit 1
fi

echo "‚úÖ –°–±–æ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–∞"
echo ""
echo "üöÄ –î–µ–ø–ª–æ–π –Ω–∞ Vercel..."
vercel --prod --yes

echo ""
echo "‚úÖ –î–µ–ø–ª–æ–π –∑–∞–≤–µ—Ä—à–µ–Ω!"
echo ""
echo "‚ö†Ô∏è  –ù–µ –∑–∞–±—É–¥—å—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø—Ä–æ–µ–∫—Ç–∞:"
echo "   - GOOGLE_SERVICE_ACCOUNT_EMAIL"
echo "   - GOOGLE_PRIVATE_KEY"
