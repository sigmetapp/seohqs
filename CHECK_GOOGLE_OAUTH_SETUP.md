# –ü–æ—à–∞–≥–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Google OAuth

## ‚ùå –°—Ç–∞—Ç—É—Å –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ù–ï –≤–ª–∏—è–µ—Ç –Ω–∞ redirect_uri_mismatch

–û—à–∏–±–∫–∞ `redirect_uri_mismatch` –≤–æ–∑–Ω–∏–∫–∞–µ—Ç **–î–û** –ø–æ–∫–∞–∑–∞ consent screen, –ø–æ—ç—Ç–æ–º—É —Å—Ç–∞—Ç—É—Å –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –Ω–µ –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è.

## ‚úÖ –ß—Ç–æ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:

### 1. –†–µ–∂–∏–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (Testing vs Production)

**–ì–¥–µ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- Google Cloud Console ‚Üí APIs & Services ‚Üí OAuth consent screen
- –°–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ —Å—Ç–∞—Ç—É—Å –≤–≤–µ—Ä—Ö—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã

**–ï—Å–ª–∏ —Å—Ç–∞—Ç—É—Å "Testing":**
- ‚úÖ –î–æ–±–∞–≤—å—Ç–µ —Å–≤–æ–π email –≤ "Test users" (–∫–Ω–æ–ø–∫–∞ "+ ADD USERS")
- –ò–õ–ò –æ–ø—É–±–ª–∏–∫—É–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–∫–Ω–æ–ø–∫–∞ "PUBLISH APP")

**–ï—Å–ª–∏ —Å—Ç–∞—Ç—É—Å "In production":**
- ‚úÖ –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ redirect_uri –≤ Google Cloud Console

**–ì–¥–µ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- Google Cloud Console ‚Üí APIs & Services ‚Üí Credentials
- –ù–∞–π–¥–∏—Ç–µ –≤–∞—à OAuth 2.0 Client ID
- –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–∞—Ä–∞–Ω–¥–∞—à (—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å)
- –†–∞–∑–¥–µ–ª "Authorized redirect URIs"

**–î–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ç–æ—á–Ω–æ —Ç–∞–∫–æ–π URI:**
```
https://seohqs.vercel.app/api/auth/user/google/callback
```

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
- ‚úÖ –ù–µ—Ç –∑–∞–≤–µ—Ä—à–∞—é—â–µ–≥–æ —Å–ª—ç—à–∞ (`/`)
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `https` (–Ω–µ `http`)
- ‚úÖ –î–æ–º–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π (`seohqs.vercel.app`)
- ‚úÖ –ü—É—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π (`/api/auth/user/google/callback`)

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ Vercel

**–ì–¥–µ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- Vercel ‚Üí Settings ‚Üí Environment Variables

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:**

#### NEXT_PUBLIC_APP_URL
- ‚úÖ –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: `https://seohqs.vercel.app` (–±–µ–∑ –∑–∞–≤–µ—Ä—à–∞—é—â–µ–≥–æ —Å–ª—ç—à–∞)
- ‚ùå –ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å: `https://seohqs.vercel.app/`

#### GOOGLE_CLIENT_ID
- ‚úÖ –î–æ–ª–∂–µ–Ω —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å Client ID –≤ Google Cloud Console
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —ç—Ç–æ —Ç–æ—Ç –∂–µ Client ID, –≤ –∫–æ—Ç–æ—Ä–æ–º –¥–æ–±–∞–≤–ª–µ–Ω redirect_uri

#### GOOGLE_CLIENT_SECRET
- ‚úÖ –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–µ–∫—Ä–µ—Ç –¥–ª—è —ç—Ç–æ–≥–æ Client ID

#### GOOGLE_OAUTH_REDIRECT_URI (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å)
- ‚úÖ –î–æ–±–∞–≤—å—Ç–µ —è–≤–Ω–æ: `https://seohqs.vercel.app/api/auth/user/google/callback`
- –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ redirect_uri

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

**–ì–¥–µ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- Vercel ‚Üí –≤–∞—à –ø—Ä–æ–µ–∫—Ç ‚Üí Deployments ‚Üí –ø–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–ø–ª–æ–π
- Functions ‚Üí `/api/auth/user/google`

**–ß—Ç–æ –∏—Å–∫–∞—Ç—å –≤ –ª–æ–≥–∞—Ö:**
```
[User Google OAuth] Redirect URI: https://seohqs.vercel.app/api/auth/user/google/callback
[User Google OAuth] Redirect URI –≤ authUrl: https://seohqs.vercel.app/api/auth/user/google/callback
```

**–≠—Ç–∏ –¥–≤–∞ –∑–Ω–∞—á–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã:**
1. –°–æ–≤–ø–∞–¥–∞—Ç—å –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º
2. –°–æ–≤–ø–∞–¥–∞—Ç—å —Å —Ç–µ–º, —á—Ç–æ –≤ Google Cloud Console

### 5. –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π Client ID

**–í–∞–∂–Ω–æ:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ:
- –í Vercel –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `GOOGLE_CLIENT_ID` —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —Ç–æ—Ç –∂–µ Client ID
- –í —ç—Ç–æ–º Client ID –¥–æ–±–∞–≤–ª–µ–Ω redirect_uri `https://seohqs.vercel.app/api/auth/user/google/callback`

**–ï—Å–ª–∏ —É –≤–∞—Å –Ω–µ—Å–∫–æ–ª—å–∫–æ OAuth Client IDs:**
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
- –ò–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—ã–π Client ID —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## üîß –ë—ã—Å—Ç—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ

### –®–∞–≥ 1: –î–æ–±–∞–≤—å—Ç–µ GOOGLE_OAUTH_REDIRECT_URI –≤ Vercel

1. Vercel ‚Üí Settings ‚Üí Environment Variables
2. –î–æ–±–∞–≤—å—Ç–µ:
   - **Name**: `GOOGLE_OAUTH_REDIRECT_URI`
   - **Value**: `https://seohqs.vercel.app/api/auth/user/google/callback`
   - **Environment**: Production (–∏ Preview, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
3. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Google Cloud Console

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ "Authorized redirect URIs" –µ—Å—Ç—å:
   - `https://seohqs.vercel.app/api/auth/user/google/callback`
2. –ï—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç - –¥–æ–±–∞–≤—å—Ç–µ –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ

### –®–∞–≥ 3: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –¥–µ–ø–ª–æ–π

1. –í Vercel –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –¥–µ–ø–ª–æ–π
2. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è —Å–Ω–æ–≤–∞

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ redirect_uri —Å–æ–≤–ø–∞–¥–∞–µ—Ç.

## ‚ùì –ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã

**Q: –ú–æ–∂–µ—Ç –ª–∏ —Å—Ç–∞—Ç—É—Å –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –±—ã—Ç—å –ø—Ä–æ–±–ª–µ–º–æ–π?**
A: –ù–µ—Ç, redirect_uri_mismatch –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –¥–æ –ø–æ–∫–∞–∑–∞ consent screen.

**Q: –ú–æ–∂–µ—Ç –ª–∏ —Ä–µ–∂–∏–º Testing –±—ã—Ç—å –ø—Ä–æ–±–ª–µ–º–æ–π?**
A: –ú–æ–∂–µ—Ç, –µ—Å–ª–∏ –≤—ã –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ Test users. –ù–æ —ç—Ç–æ –≤—ã–∑–æ–≤–µ—Ç –¥—Ä—É–≥—É—é –æ—à–∏–±–∫—É, –Ω–µ redirect_uri_mismatch.

**Q: –ü–æ—á–µ–º—É –≤—Å–µ —Ä–∞–≤–Ω–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç?**
A: –°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, redirect_uri –≤ –∑–∞–ø—Ä–æ—Å–µ –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å —Ç–µ–º, —á—Ç–æ –≤ Google Cloud Console. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏.

**Q: –ö–∞–∫ —Ç–æ—á–Ω–æ —É–∑–Ω–∞—Ç—å, –∫–∞–∫–æ–π redirect_uri –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è?**
A: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ Vercel –ø–æ—Å–ª–µ –ø–æ–ø—ã—Ç–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏. –¢–∞–º –±—É–¥–µ—Ç —Å—Ç—Ä–æ–∫–∞ `[User Google OAuth] Redirect URI –≤ authUrl:`.
