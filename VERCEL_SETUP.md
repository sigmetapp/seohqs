# Настройка для Vercel

## Подключение базы данных

Проект автоматически определяет тип базы данных:
- **На Vercel**: использует PostgreSQL через `@vercel/postgres`
- **Локально**: использует SQLite

## Переменные окружения для Vercel

В настройках проекта Vercel добавьте переменные окружения:

### Если используете Vercel Postgres:
```
POSTGRES_URL=your_postgres_url
```

Или:
```
DATABASE_URL=your_postgres_url
```

### Автоматическое определение
Проект автоматически определяет Vercel по переменной `VERCEL=true` (устанавливается автоматически на Vercel).

## Первая миграция

1. После деплоя откройте: `https://your-app.vercel.app/api/migrate`
2. Это создаст необходимые таблицы в базе данных
3. Миграции также запускаются автоматически при первом использовании

## Структура базы данных

После миграции будут созданы таблицы:
- `affiliate_offers` - основная таблица с данными
- `migrations` - отслеживание выполненных миграций

## Проверка работы

1. Откройте главную страницу: `https://your-app.vercel.app/`
2. Загрузите CSV файлы через форму
3. Данные сохранятся в PostgreSQL и будут отображаться в таблице

## Устранение проблем

### 404 ошибка
- Убедитесь, что переменные окружения настроены
- Проверьте, что база данных подключена в Vercel
- Запустите миграции: `/api/migrate`

### Ошибки подключения к БД
- Проверьте переменные окружения `POSTGRES_URL` или `DATABASE_URL`
- Убедитесь, что база данных создана в Vercel
